<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sound Factory Team - Official Promoter Program by Jonathan Peters</title>
<meta name="description" content="Join Jonathan Peters' official Sound Factory NYC promoter program. Earn commissions, exclusive access, and be part of NYC's legendary nightlife." />
<meta name="color-scheme" content="dark" />
<style>
:root{
  --bg:#000;
  --surface:#0a0a0a;
  --border:rgba(255,255,255,0.08);
  --text:#fff;
  --muted:#999;
  --accent:#fff;
  --purple:#9333ea;
  --purple-light:#a855f7;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;margin:0;padding:0}
body{
  background:#000;
  color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  position:relative;
}

/* Background pattern */
body::before{
  content:'';
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(147, 51, 234, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(147, 51, 234, 0.1) 0%, transparent 50%);
  pointer-events:none;
  z-index:1;
}

.main-wrapper{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
  position:relative;
  z-index:2;
}

.container{
  width:100%;
  max-width:440px;
  animation:fadeIn 0.4s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* Header */
.header{
  text-align:center;
  margin-bottom:32px;
}

.logo-wrapper{
  margin:0 auto 24px;
  display:flex;
  justify-content:center;
}

.logo{
  width:80px;
  height:80px;
  object-fit:contain;
  filter:brightness(0) invert(1);
  opacity:0.95;
}

h1{
  font-size:32px;
  font-weight:700;
  margin-bottom:8px;
  letter-spacing:-0.5px;
  background:linear-gradient(180deg, #fff 0%, #999 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}

.subtitle{
  color:#999;
  font-size:15px;
  line-height:1.4;
}

.by-line{
  display:inline-flex;
  align-items:center;
  gap:8px;
  background:linear-gradient(135deg, rgba(147,51,234,0.1), rgba(147,51,234,0.05));
  border:1px solid rgba(147,51,234,0.2);
  padding:6px 14px;
  border-radius:20px;
  font-size:12px;
  margin-top:12px;
  font-weight:500;
  letter-spacing:0.3px;
}

.by-line .dj-icon{
  font-size:14px;
}

.official-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  background:rgba(76,175,80,0.1);
  border:1px solid rgba(76,175,80,0.2);
  padding:4px 12px;
  border-radius:20px;
  font-size:11px;
  color:#4CAF50;
  margin-top:8px;
  text-transform:uppercase;
  letter-spacing:0.5px;
  font-weight:600;
}

/* Main Card */
.main-card{
  background:rgba(10,10,10,0.8);
  border:1px solid var(--border);
  border-radius:16px;
  padding:32px;
  backdrop-filter:blur(20px);
  box-shadow:0 20px 40px rgba(0,0,0,0.5);
}

/* Quick Benefits */
.quick-benefits{
  margin-bottom:28px;
}

.benefit-row{
  display:flex;
  align-items:center;
  margin-bottom:14px;
  color:#ccc;
  font-size:14px;
}

.benefit-icon{
  margin-right:12px;
  color:#4CAF50;
  font-size:16px;
}

/* Form */
.form-section{
  margin-bottom:20px;
}

.form-group{
  margin-bottom:16px;
}

label{
  display:block;
  font-size:11px;
  font-weight:600;
  margin-bottom:6px;
  color:#888;
  text-transform:uppercase;
  letter-spacing:0.5px;
}

input{
  width:100%;
  padding:12px 14px;
  border-radius:8px;
  background:#000;
  border:1px solid var(--border);
  color:#fff;
  font-size:15px;
  transition:all 0.2s;
}

input:focus{
  outline:none;
  border-color:rgba(147,51,234,0.3);
  background:#050505;
  box-shadow:0 0 0 3px rgba(147,51,234,0.05);
}

input::placeholder{
  color:#555;
}

/* Buttons */
.btn{
  width:100%;
  padding:14px;
  border-radius:8px;
  background:linear-gradient(135deg, var(--purple), var(--purple-light));
  color:#fff;
  border:none;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  transition:all 0.2s;
  position:relative;
  overflow:hidden;
}

.btn::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  border-radius:50%;
  background:rgba(255,255,255,0.2);
  transform:translate(-50%, -50%);
  transition:width 0.4s, height 0.4s;
}

.btn:hover::before{
  width:400px;
  height:400px;
}

.btn:hover:not(:disabled){
  transform:translateY(-1px);
  box-shadow:0 8px 16px rgba(147,51,234,0.3);
}

.btn:disabled{
  opacity:0.5;
  cursor:not-allowed;
}

.btn-secondary{
  background:transparent;
  color:#fff;
  border:1px solid var(--border);
  margin-top:12px;
}

.btn-secondary:hover{
  background:rgba(255,255,255,0.05);
  border-color:rgba(147,51,234,0.3);
}

/* Messages */
.error{
  background:rgba(255,0,0,0.1);
  border:1px solid rgba(255,0,0,0.2);
  color:#ff6b6b;
  padding:10px;
  border-radius:6px;
  font-size:13px;
  margin-top:12px;
  text-align:center;
}

.loading{
  display:inline-block;
  width:14px;
  height:14px;
  border:2px solid #fff;
  border-radius:50%;
  border-top-color:transparent;
  animation:spin 0.8s linear infinite;
  margin-right:8px;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

/* Success Modal */
.success-modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(0,0,0,0.95);
  z-index:1000;
  padding:20px;
  align-items:center;
  justify-content:center;
}

.success-modal.active{
  display:flex;
}

.success-content{
  background:#0a0a0a;
  border:1px solid rgba(147,51,234,0.3);
  border-radius:16px;
  padding:40px;
  max-width:500px;
  width:100%;
  text-align:center;
  position:relative;
}

.success-icon{
  width:80px;
  height:80px;
  background:linear-gradient(135deg, rgba(76,175,80,0.2), rgba(76,175,80,0.1));
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0 auto 24px;
  font-size:40px;
}

.success-title{
  font-size:24px;
  font-weight:600;
  margin-bottom:12px;
}

.success-message{
  color:#999;
  font-size:15px;
  line-height:1.6;
  margin-bottom:24px;
}

.success-details{
  background:rgba(147,51,234,0.1);
  border:1px solid rgba(147,51,234,0.2);
  border-radius:8px;
  padding:16px;
  margin-bottom:24px;
}

.detail-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
  font-size:14px;
}

.detail-row:last-child{
  margin-bottom:0;
}

.detail-label{
  color:#888;
}

.detail-value{
  font-weight:600;
  color:#fff;
}

/* Footer Links */
.footer-links{
  text-align:center;
  margin-top:24px;
  padding-top:24px;
  border-top:1px solid var(--border);
}

.footer-links a{
  color:#666;
  text-decoration:none;
  font-size:13px;
  transition:color 0.2s;
}

.footer-links a:hover{
  color:var(--purple-light);
}

/* Trust Badges */
.trust-section{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
  margin-top:20px;
  padding-top:20px;
  border-top:1px solid var(--border);
}

.trust-badges{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:16px;
}

.trust-badge{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  color:#666;
}

.trust-badge svg{
  width:16px;
  height:16px;
  opacity:0.7;
}

.company-info{
  text-align:center;
  font-size:11px;
  color:#555;
  line-height:1.6;
}

/* Professional Footer */
.professional-footer{
  background:rgba(10,10,10,0.5);
  border-top:1px solid var(--border);
  padding:32px 20px;
  margin-top:auto;
  position:relative;
  z-index:2;
}

.footer-content{
  max-width:800px;
  margin:0 auto;
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:32px;
}

.footer-section h3{
  font-size:12px;
  font-weight:600;
  text-transform:uppercase;
  letter-spacing:0.5px;
  color:#888;
  margin-bottom:12px;
}

.footer-section p,
.footer-section a{
  font-size:13px;
  color:#555;
  line-height:1.8;
  text-decoration:none;
  transition:color 0.2s;
}

.footer-section a:hover{
  color:var(--purple-light);
}

.footer-links-list{
  list-style:none;
  padding:0;
  margin:0;
}

.footer-links-list li{
  margin-bottom:8px;
}

.footer-bottom{
  margin-top:32px;
  padding-top:20px;
  border-top:1px solid var(--border);
  text-align:center;
  font-size:11px;
  color:#444;
}

.footer-bottom a{
  color:#666;
  text-decoration:none;
}

.footer-bottom a:hover{
  color:var(--purple-light);
}

.jp-signature{
  color:var(--purple-light);
  font-weight:500;
}

/* Modal */
.modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(0,0,0,0.9);
  z-index:1000;
  padding:20px;
  align-items:center;
  justify-content:center;
}

.modal.active{
  display:flex;
}

.modal-content{
  background:#0a0a0a;
  border:1px solid var(--border);
  border-radius:16px;
  padding:32px;
  max-width:500px;
  width:100%;
  max-height:80vh;
  overflow-y:auto;
  position:relative;
}

.modal-close{
  position:absolute;
  top:16px;
  right:16px;
  background:transparent;
  border:none;
  color:#666;
  font-size:24px;
  cursor:pointer;
  padding:4px;
  line-height:1;
}

.modal-close:hover{
  color:#fff;
}

.workflow-step{
  display:flex;
  align-items:flex-start;
  margin-bottom:20px;
}

.step-number{
  background:linear-gradient(135deg, rgba(147,51,234,0.2), rgba(147,51,234,0.1));
  border:1px solid rgba(147,51,234,0.2);
  border-radius:50%;
  width:32px;
  height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  margin-right:16px;
  flex-shrink:0;
  font-size:14px;
  font-weight:600;
}

.step-content h3{
  font-size:15px;
  margin-bottom:4px;
}

.step-content p{
  color:#999;
  font-size:13px;
  line-height:1.5;
}

@media (max-width:640px){
  .footer-content{
    grid-template-columns:1fr;
    text-align:center;
  }
  .professional-footer{
    padding:24px 16px;
  }
}

@media (max-width:480px){
  .container{
    max-width:100%;
  }
  .main-card{
    padding:24px;
  }
  h1{
    font-size:28px;
  }
}
</style>
</head>
<body>

<div class="main-wrapper">
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo-wrapper">
        <img src="sf-logo.png" alt="Sound Factory NYC" class="logo" />
      </div>
      <h1>Join Our Team</h1>
      <p class="subtitle">Earn commissions promoting SF events</p>
      <span class="by-line">
        <span class="dj-icon">🎧</span>
        by Jonathan Peters
      </span>
      <span class="official-badge">
        <svg width="12" height="12" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
        Official Program
      </span>
    </div>

    <!-- Main Card -->
    <div class="main-card">
      <!-- Earning Potential Banner -->
      <div style="background:linear-gradient(135deg, rgba(76,175,80,0.15), rgba(76,175,80,0.05));border:1px solid rgba(76,175,80,0.3);border-radius:8px;padding:16px;margin-bottom:24px;text-align:center;">
        <div style="font-size:24px;font-weight:700;color:#4CAF50;margin-bottom:4px;">Earn $500-$2,000+ Per Event</div>
        <div style="font-size:13px;color:#999;">Top promoters earning $5K+ monthly</div>
      </div>
      
      <!-- Quick Benefits -->
      <div class="quick-benefits">
        <div class="benefit-row">
          <span class="benefit-icon">💰</span>
          <span><strong>$10 per ticket + 20% on tables</strong> (instant payout)</span>
        </div>
        <div class="benefit-row">
          <span class="benefit-icon">🎟️</span>
          <span><strong>Free entry for you</strong> + guest list spots for friends</span>
        </div>
        <div class="benefit-row">
          <span class="benefit-icon">✨</span>
          <span><strong>AI creates flyers with YOUR name</strong> in 30 seconds</span>
        </div>
        <div class="benefit-row">
          <span class="benefit-icon">📱</span>
          <span><strong>Direct WhatsApp access</strong> to Jonathan Peters' team</span>
        </div>
        <div class="benefit-row">
          <span class="benefit-icon">🏆</span>
          <span><strong>VIP treatment</strong> at all Sound Factory events</span>
        </div>
      </div>

      <!-- Form -->
      <div class="form-section">
        <form id="signupForm">
          <div class="form-group">
            <label for="name">Full Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your full name" required />
          </div>

          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" placeholder="your@email.com" required />
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" placeholder="(929) 362-9534" required />
          </div>

          <button type="submit" class="btn" id="submitBtn">
            Create Account
          </button>
          
          <button type="button" class="btn btn-secondary" onclick="showWorkflow()">
            How it works →
          </button>
        </form>
      </div>

      <!-- Footer Links -->
      <div class="footer-links">
        <a href="promoter-login.html">Already have an account? Sign in</a>
      </div>

      <!-- Trust Section -->
      <div class="trust-section">
        <div class="trust-badges">
          <div class="trust-badge">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
            </svg>
            Secure Payments
          </div>
          <div class="trust-badge">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
            </svg>
            SMS Verified
          </div>
          <div class="trust-badge">
            <svg fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-5L9 2H4z" clip-rule="evenodd"/>
            </svg>
            Tracked Sales
          </div>
        </div>
        <div class="company-info">
          Powered by Stripe • Protected by SSL • Verified Accounts Only
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Professional Footer -->
<footer class="professional-footer">
  <div class="footer-content">
    <div class="footer-section">
      <h3>About Sound Factory</h3>
      <p>NYC's legendary nightlife venue, bringing world-class DJs and unforgettable experiences since the 90s.</p>
      <p style="margin-top:12px;color:#a855f7;font-weight:500;">Jonathan Peters Productions</p>
    </div>
    
    <div class="footer-section">
      <h3>Promoter Program</h3>
      <ul class="footer-links-list">
        <li><a href="#" onclick="showWorkflow(); return false;">How It Works</a></li>
        <li><a href="promoter-login.html">Promoter Login</a></li>
        <li><a href="#" onclick="showCommissions(); return false;">Commission Structure</a></li>
        <li><a href="mailto:team@soundfactorynyc.com">Support</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h3>Security & Trust</h3>
      <p>All payments processed securely through Stripe. Your data is encrypted and protected. SMS verification ensures account security.</p>
    </div>
    
    <div class="footer-section">
      <h3>Contact</h3>
      <p>Sound Factory NYC<br>
      team@soundfactorynyc.com<br>
      <span style="color:#888;">Promoter Hotline:<br>(646) 466-4925</span></p>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>© 2025 Sound Factory NYC. All rights reserved. | Created by <a href="https://jonathanpeters.com" target="_blank" class="jp-signature">Jonathan Peters</a> | <a href="#" onclick="showPrivacy(); return false;">Privacy</a> | <a href="#" onclick="showTerms(); return false;">Terms</a></p>
  </div>
</footer>

<!-- Success Modal -->
<div class="success-modal" id="successModal">
  <div class="success-content">
    <div class="success-icon">✓</div>
    <h2 class="success-title">Account Created!</h2>
    <p class="success-message">
      Perfect! We've created your promoter account and will send you a confirmation email shortly.
    </p>
    
    <div class="success-details">
      <div class="detail-row">
        <span class="detail-label">Your Promo Code:</span>
        <span class="detail-value" id="modalPromoCode">Loading...</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Next Step:</span>
        <span class="detail-value">Complete Stripe setup</span>
      </div>
    </div>
    
    <p style="color:#888;font-size:14px;margin-bottom:24px;">
      In a moment, you'll be redirected to Stripe to set up instant payouts. This takes just 2 minutes!
    </p>
    
    <button class="btn" id="continueBtn">
      Continue to Stripe →
    </button>
  </div>
</div>

<!-- Workflow Modal -->
<div class="modal" id="workflowModal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('workflowModal')">×</button>
    <h2 style="margin-bottom:24px;">How It Works</h2>
    
    <div class="workflow-step">
      <div class="step-number">1</div>
      <div class="step-content">
        <h3>Quick Signup</h3>
        <p>Enter your information and we'll create your unique promo code instantly.</p>
      </div>
    </div>

    <div class="workflow-step">
      <div class="step-number">2</div>
      <div class="step-content">
        <h3>Stripe Setup</h3>
        <p>Complete a one-time payment setup with Stripe. This ensures instant payouts for every sale.</p>
      </div>
    </div>

    <div class="workflow-step">
      <div class="step-number">3</div>
      <div class="step-content">
        <h3>Access Dashboard</h3>
        <p>Get your personalized links, marketing materials, and AI-powered custom flyers.</p>
      </div>
    </div>

    <div class="workflow-step">
      <div class="step-number">4</div>
      <div class="step-content">
        <h3>Earn Instantly</h3>
        <p>Every purchase with your code automatically credits your account. Track everything in real-time.</p>
      </div>
    </div>

    <div style="margin-top:28px;">
      <button class="btn" onclick="closeModal('workflowModal')">Got it</button>
    </div>
  </div>
</div>

<!-- Commission Modal -->
<div class="modal" id="commissionModal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeModal('commissionModal')">×</button>
    <h2 style="margin-bottom:24px;">Commission Structure</h2>
    
    <div style="background:#111;border:1px solid var(--border);border-radius:8px;padding:20px;margin-bottom:20px;">
      <h3 style="font-size:16px;margin-bottom:16px;color:#4CAF50;">Ticket Sales</h3>
      <p style="font-size:24px;font-weight:600;margin-bottom:8px;">$10</p>
      <p style="color:#999;font-size:13px;">Flat rate per ticket sold</p>
    </div>
    
    <div style="background:#111;border:1px solid var(--border);border-radius:8px;padding:20px;">
      <h3 style="font-size:16px;margin-bottom:16px;color:#4CAF50;">Table Sales</h3>
      <p style="font-size:24px;font-weight:600;margin-bottom:8px;">20%</p>
      <p style="color:#999;font-size:13px;margin-bottom:12px;">Commission on all table sales</p>
      
      <div style="font-size:12px;color:#666;line-height:1.8;">
        <div>2 person table ($400) = <span style="color:#4CAF50;">$80</span></div>
        <div>4 person table ($800) = <span style="color:#4CAF50;">$160</span></div>
        <div>6 person table ($1,200) = <span style="color:#4CAF50;">$240</span></div>
        <div>8 person table ($1,600) = <span style="color:#4CAF50;">$320</span></div>
        <div>10 person table ($2,000) = <span style="color:#4CAF50;">$400</span></div>
        <div>12 person table ($2,400) = <span style="color:#4CAF50;">$480</span></div>
      </div>
    </div>
    
    <p style="text-align:center;color:#666;font-size:12px;margin-top:20px;">
      Commissions are automatically calculated and credited to your account instantly.
    </p>

    <div style="margin-top:28px;">
      <button class="btn" onclick="closeModal('commissionModal')">Close</button>
    </div>
  </div>
</div>

<script>
let stripeRedirectUrl = '';

// Modal functions
function showWorkflow() {
  document.getElementById('workflowModal').classList.add('active');
}

function showCommissions() {
  document.getElementById('commissionModal').classList.add('active');
}

function closeModal(modalId) {
  document.getElementById(modalId).classList.remove('active');
}

function showPrivacy() {
  alert('Privacy Policy: We protect your data with industry-standard encryption. Your information is never sold or shared without consent.');
}

function showTerms() {
  alert('Terms of Service: By joining our promoter program, you agree to promote events professionally and ethically. Commissions are paid for verified sales only.');
}

// Form submission
document.getElementById('signupForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  
  const submitBtn = document.getElementById('submitBtn');
  const originalText = submitBtn.innerHTML;
  
  // Get form data
  const formData = {
    name: document.getElementById('name').value.trim(),
    email: document.getElementById('email').value.trim(),
    phone: document.getElementById('phone').value.trim()
  };
  
  // Basic validation
  if (!formData.name || !formData.email || !formData.phone) {
    showError('Please fill in all fields');
    return;
  }
  
  // Phone validation
  const phoneRegex = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/;
  if (!phoneRegex.test(formData.phone.replace(/\s/g, ''))) {
    showError('Please enter a valid phone number');
    return;
  }
  
  // Show loading state
  submitBtn.disabled = true;
  submitBtn.innerHTML = '<span class="loading"></span>Creating account...';
  
  try {
    // Create promoter account
    const response = await fetch('/.netlify/functions/create-promoter', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData)
    });
    
    const data = await response.json();
    
    if (data.success && data.onboardingUrl) {
      // Store data for later use
      stripeRedirectUrl = data.onboardingUrl;
      
      // Store promoter info
      localStorage.setItem('promoter_temp', JSON.stringify({
        name: formData.name,
        email: formData.email,
        phone: formData.phone,
        promo_code: data.promoCode
      }));
      
      // Show success modal
      document.getElementById('modalPromoCode').textContent = data.promoCode;
      document.getElementById('successModal').classList.add('active');
      
      // Auto-redirect after 5 seconds
      setTimeout(() => {
        if (stripeRedirectUrl) {
          window.location.href = stripeRedirectUrl;
        }
      }, 5000);
      
    } else if (data.hasAccount) {
      // User already has account
      showError(data.error || 'You already have an account. Please sign in.');
      setTimeout(() => {
        window.location.href = 'promoter-login.html';
      }, 2000);
    } else {
      throw new Error(data.error || 'Failed to create account');
    }
    
  } catch (error) {
    console.error('Signup error:', error);
    showError(error.message || 'Something went wrong. Please try again.');
    submitBtn.disabled = false;
    submitBtn.innerHTML = originalText;
  }
});

// Continue button in success modal
document.getElementById('continueBtn').addEventListener('click', () => {
  if (stripeRedirectUrl) {
    window.location.href = stripeRedirectUrl;
  }
});

function showError(message) {
  // Remove any existing error
  const existing = document.querySelector('.error');
  if (existing) existing.remove();
  
  // Create and show new error
  const error = document.createElement('div');
  error.className = 'error';
  error.textContent = message;
  document.querySelector('.form-section').appendChild(error);
  
  // Auto-remove after 5 seconds
  setTimeout(() => error.remove(), 5000);
}

// Format phone number as user types
document.getElementById('phone').addEventListener('input', (e) => {
  let value = e.target.value.replace(/\D/g, '');
  if (value.length > 0) {
    if (value.length <= 3) {
      value = `(${value}`;
    } else if (value.length <= 6) {
      value = `(${value.slice(0, 3)}) ${value.slice(3)}`;
    } else if (value.length <= 10) {
      value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6)}`;
    }
  }
  e.target.value = value;
});
</script>

</body>
</html>