<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Sound Factory - Interactive Pin Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            position: relative;
        }

        /* Main Floor/Map Container */
        .floor-container {
            width: 100vw;
            height: 100vh;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(255, 20, 147, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(0, 255, 255, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
            position: relative;
            overflow: hidden;
        }

        /* Grid Pattern Overlay */
        .floor-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(255, 215, 0, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 215, 0, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            font-size: 18px;
            font-weight: 800;
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .pin-counter {
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.3);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 13px;
            color: #FFD700;
            font-weight: 600;
        }

        /* Pin Types */
        .pin {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            transform: translate(-50%, -50%);
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .pin:hover {
            transform: translate(-50%, -50%) scale(1.2);
        }

        /* Pin Type Colors */
        .pin.memory { background: linear-gradient(135deg, #4A90E2, #357ABD); }
        .pin.song { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .pin.moment { background: linear-gradient(135deg, #FF6B6B, #FF4757); }
        .pin.dream { background: linear-gradient(135deg, #2ECC71, #27AE60); }
        .pin.promo { background: linear-gradient(135deg, #9B59B6, #8E44AD); }

        /* Pin Animations */
        .pin.new {
            animation: pinDrop 0.6s ease-out;
        }

        .pin.active {
            animation: pinPulse 2s infinite;
        }

        .pin.throwback {
            animation: throwbackGlow 3s infinite;
        }

        .pin.rare {
            animation: goldFlash 1.5s infinite;
        }

        @keyframes pinDrop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        @keyframes pinPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(255, 0, 0, 0.5); }
            50% { box-shadow: 0 0 20px rgba(255, 0, 0, 0.8); }
        }

        @keyframes throwbackGlow {
            0%, 100% { box-shadow: 0 0 15px rgba(74, 144, 226, 0.6); }
            50% { box-shadow: 0 0 25px rgba(74, 144, 226, 0.9); }
        }

        @keyframes goldFlash {
            0%, 100% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); }
            50% { box-shadow: 0 0 30px rgba(255, 215, 0, 1); }
        }

        /* Pin Popup */
        .pin-popup {
            position: fixed;
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 20px;
            max-width: 300px;
            width: 90%;
            z-index: 1000;
            transform: translate(-50%, -50%);
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .pin-popup.hidden {
            display: none;
        }

        .popup-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .popup-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #000;
        }

        .popup-info h3 {
            color: #FFD700;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .popup-info .pin-type {
            font-size: 12px;
            color: #aaa;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .popup-content {
            margin-bottom: 15px;
        }

        .popup-caption {
            color: #fff;
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .popup-image {
            width: 100%;
            height: 150px;
            background: #333;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
        }

        .popup-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .action-btn {
            flex: 1;
            padding: 8px 12px;
            background: rgba(255, 215, 0, 0.2);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            color: #FFD700;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .action-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: translateY(-1px);
        }

        .reaction-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .reaction-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reaction-btn:hover {
            background: rgba(255, 215, 0, 0.3);
            transform: scale(1.1);
        }

        /* Pin Creation Modal */
        .pin-creation-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .pin-creation-modal.active {
            display: flex;
        }

        .creation-content {
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #FFD700;
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            backdrop-filter: blur(10px);
        }

        .creation-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .creation-header h2 {
            color: #FFD700;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .creation-header p {
            color: #aaa;
            font-size: 14px;
        }

        .pin-type-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .type-option {
            padding: 10px;
            border: 2px solid transparent;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .type-option.selected {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.1);
        }

        .type-option.memory { background: rgba(74, 144, 226, 0.2); }
        .type-option.song { background: rgba(255, 215, 0, 0.2); }
        .type-option.moment { background: rgba(255, 107, 107, 0.2); }
        .type-option.dream { background: rgba(46, 204, 113, 0.2); }
        .type-option.promo { background: rgba(155, 89, 182, 0.2); }

        .creation-form {
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            color: #fff;
            font-size: 14px;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-size: 14px;
        }

        .form-input::placeholder {
            color: #666;
        }

        .creation-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            color: #000;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #FFD700, #FF6B35);
            border-radius: 50%;
            border: none;
            color: #000;
            font-size: 24px;
            cursor: pointer;
            z-index: 500;
            box-shadow: 0 4px 20px rgba(255, 215, 0, 0.4);
            transition: all 0.3s;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(255, 215, 0, 0.6);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #FFD700;
            border-radius: 10px;
            padding: 15px;
            max-width: 300px;
            z-index: 1500;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: bold;
        }

        .notification-text {
            flex: 1;
            font-size: 14px;
        }

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .pin-popup {
                max-width: 280px;
                padding: 15px;
            }
            
            .pin-type-selector {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .fab {
                bottom: 20px;
                right: 20px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            .pin, .pin-popup, .notification {
                animation: none;
                transition: none;
            }
        }

        /* High contrast mode */
        @media (prefers-contrast: high) {
            .pin {
                border: 2px solid #fff;
            }
            
            .pin-popup {
                border: 3px solid #FFD700;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">SOUND FACTORY</div>
            <div class="user-info">
                <span id="userName">Guest</span>
                <div class="pin-counter" id="pinCounter">5 Pins Left</div>
            </div>
        </div>
    </header>

    <!-- Main Floor -->
    <div class="floor-container" id="floorContainer">
        <!-- Pins will be dynamically added here -->
    </div>

    <!-- Floating Action Button -->
    <button class="fab" id="createPinBtn" title="Drop a Pin">üìç</button>

    <!-- Pin Creation Modal -->
    <div class="pin-creation-modal" id="pinCreationModal">
        <div class="creation-content">
            <div class="creation-header">
                <h2>Drop Your Pin</h2>
                <p>Share your moment with the floor</p>
            </div>
            
            <div class="pin-type-selector">
                <div class="type-option memory selected" data-type="memory">
                    <div style="font-size: 20px; margin-bottom: 5px;">üíô</div>
                    <div>Memory</div>
                </div>
                <div class="type-option song" data-type="song">
                    <div style="font-size: 20px; margin-bottom: 5px;">üéµ</div>
                    <div>Song</div>
                </div>
                <div class="type-option moment" data-type="moment">
                    <div style="font-size: 20px; margin-bottom: 5px;">üî•</div>
                    <div>Moment</div>
                </div>
                <div class="type-option dream" data-type="dream">
                    <div style="font-size: 20px; margin-bottom: 5px;">üíö</div>
                    <div>Dream</div>
                </div>
                <div class="type-option promo" data-type="promo">
                    <div style="font-size: 20px; margin-bottom: 5px;">üíú</div>
                    <div>Promo</div>
                </div>
            </div>
            
            <div class="creation-form">
                <div class="form-group">
                    <label>Caption (Optional)</label>
                    <input type="text" class="form-input" id="pinCaption" placeholder="What's happening here?">
                </div>
                <div class="form-group">
                    <label>Upload Image</label>
                    <input type="file" class="form-input" id="pinImage" accept="image/*">
                </div>
            </div>
            
            <div class="creation-actions">
                <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button class="btn btn-primary" id="confirmBtn">Drop Pin</button>
            </div>
        </div>
    </div>

    <!-- Pin Popup Template -->
    <div class="pin-popup hidden" id="pinPopup">
        <div class="popup-header">
            <div class="popup-avatar" id="popupAvatar">U</div>
            <div class="popup-info">
                <h3 id="popupName">User Name</h3>
                <div class="pin-type" id="popupType">Memory</div>
            </div>
        </div>
        <div class="popup-content">
            <div class="popup-caption" id="popupCaption">This is a sample caption...</div>
            <div class="popup-image" id="popupImage">üì∑ Image</div>
        </div>
        <div class="popup-actions">
            <button class="action-btn" id="likeBtn">‚ù§Ô∏è Like</button>
            <button class="action-btn" id="shareBtn">üì§ Share</button>
            <button class="action-btn" id="saveBtn">üíæ Save</button>
        </div>
        <div class="reaction-buttons">
            <button class="reaction-btn" data-reaction="üî•">üî•</button>
            <button class="reaction-btn" data-reaction="‚ù§Ô∏è">‚ù§Ô∏è</button>
            <button class="reaction-btn" data-reaction="üé∂">üé∂</button>
            <button class="reaction-btn" data-reaction="üòç">üòç</button>
        </div>
    </div>

    <!-- Notification Template -->
    <div class="notification" id="notification">
        <div class="notification-content">
            <div class="notification-icon">üìç</div>
            <div class="notification-text" id="notificationText">New pin dropped!</div>
        </div>
    </div>

    <script>
        class NightlifePinPlatform {
            constructor() {
                this.pins = [];
                this.userPins = 0;
                this.maxPins = 5;
                this.selectedPinType = 'memory';
                this.currentUser = {
                    name: 'Guest User',
                    avatar: 'G',
                    pins: []
                };
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.createSamplePins();
                this.updatePinCounter();
            }
            
            setupEventListeners() {
                // Floor click for pin creation
                document.getElementById('floorContainer').addEventListener('click', (e) => {
                    if (e.target.id === 'floorContainer') {
                        this.showPinCreationModal(e.clientX, e.clientY);
                    }
                });
                
                // FAB click
                document.getElementById('createPinBtn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.showPinCreationModal(window.innerWidth / 2, window.innerHeight / 2);
                });
                
                // Pin type selection
                document.querySelectorAll('.type-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.type-option').forEach(o => o.classList.remove('selected'));
                        option.classList.add('selected');
                        this.selectedPinType = option.dataset.type;
                    });
                });
                
                // Modal actions
                document.getElementById('cancelBtn').addEventListener('click', () => {
                    this.hidePinCreationModal();
                });
                
                document.getElementById('confirmBtn').addEventListener('click', () => {
                    this.createPin();
                });
                
                // Popup actions
                document.getElementById('likeBtn').addEventListener('click', () => {
                    this.likePin();
                });
                
                document.getElementById('shareBtn').addEventListener('click', () => {
                    this.sharePin();
                });
                
                document.getElementById('saveBtn').addEventListener('click', () => {
                    this.savePin();
                });
                
                // Reaction buttons
                document.querySelectorAll('.reaction-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        this.addReaction(btn.dataset.reaction);
                    });
                });
                
                // Close popup when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.pin-popup') && !e.target.closest('.pin')) {
                        this.hidePinPopup();
                    }
                });
            }
            
            showPinCreationModal(x, y) {
                if (this.userPins >= this.maxPins) {
                    this.showNotification('You\'ve reached your pin limit!', 'warning');
                    return;
                }
                
                this.pendingPosition = { x, y };
                document.getElementById('pinCreationModal').classList.add('active');
            }
            
            hidePinCreationModal() {
                document.getElementById('pinCreationModal').classList.remove('active');
                document.getElementById('pinCaption').value = '';
                document.getElementById('pinImage').value = '';
            }
            
            createPin() {
                const caption = document.getElementById('pinCaption').value;
                const image = document.getElementById('pinImage').files[0];
                
                const pin = {
                    id: Date.now(),
                    type: this.selectedPinType,
                    x: this.pendingPosition.x,
                    y: this.pendingPosition.y,
                    caption: caption || '',
                    image: image ? URL.createObjectURL(image) : null,
                    user: this.currentUser,
                    createdAt: new Date(),
                    likes: 0,
                    reactions: []
                };
                
                this.pins.push(pin);
                this.userPins++;
                this.renderPin(pin);
                this.hidePinCreationModal();
                this.updatePinCounter();
                this.showNotification('Pin dropped successfully!', 'success');
                
                // Add new pin animation
                setTimeout(() => {
                    const pinElement = document.querySelector(`[data-pin-id="${pin.id}"]`);
                    if (pinElement) {
                        pinElement.classList.add('new');
                    }
                }, 100);
            }
            
            renderPin(pin) {
                const pinElement = document.createElement('div');
                pinElement.className = `pin ${pin.type}`;
                pinElement.style.left = pin.x + 'px';
                pinElement.style.top = pin.y + 'px';
                pinElement.dataset.pinId = pin.id;
                pinElement.title = pin.caption || `${pin.type} pin`;
                
                // Add click handler
                pinElement.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.showPinPopup(pin);
                });
                
                document.getElementById('floorContainer').appendChild(pinElement);
            }
            
            showPinPopup(pin) {
                const popup = document.getElementById('pinPopup');
                const avatar = document.getElementById('popupAvatar');
                const name = document.getElementById('popupName');
                const type = document.getElementById('popupType');
                const caption = document.getElementById('popupCaption');
                const image = document.getElementById('popupImage');
                
                avatar.textContent = pin.user.avatar;
                name.textContent = pin.user.name;
                type.textContent = pin.type.charAt(0).toUpperCase() + pin.type.slice(1);
                caption.textContent = pin.caption || 'No caption';
                
                if (pin.image) {
                    image.style.backgroundImage = `url(${pin.image})`;
                    image.style.backgroundSize = 'cover';
                    image.style.backgroundPosition = 'center';
                    image.textContent = '';
                } else {
                    image.style.backgroundImage = 'none';
                    image.textContent = 'üì∑ No Image';
                }
                
                // Position popup
                popup.style.left = pin.x + 'px';
                popup.style.top = pin.y + 'px';
                popup.classList.remove('hidden');
                
                // Store current pin for actions
                this.currentPin = pin;
            }
            
            hidePinPopup() {
                document.getElementById('pinPopup').classList.add('hidden');
            }
            
            likePin() {
                if (this.currentPin) {
                    this.currentPin.likes++;
                    this.showNotification('Pin liked! ‚ù§Ô∏è', 'success');
                    this.hidePinPopup();
                }
            }
            
            sharePin() {
                if (this.currentPin) {
                    this.showNotification('Pin shared! üì§', 'success');
                    this.hidePinPopup();
                }
            }
            
            savePin() {
                if (this.currentPin) {
                    this.showNotification('Pin saved! üíæ', 'success');
                    this.hidePinPopup();
                }
            }
            
            addReaction(reaction) {
                if (this.currentPin) {
                    this.currentPin.reactions.push(reaction);
                    this.showNotification(`Added ${reaction} reaction!`, 'success');
                    this.hidePinPopup();
                }
            }
            
            createSamplePins() {
                const samplePins = [
                    { type: 'memory', x: 200, y: 300, caption: 'Amazing night last week!', user: { name: 'DJ Mike', avatar: 'M' }},
                    { type: 'song', x: 400, y: 200, caption: 'This track is fire! üî•', user: { name: 'Sarah', avatar: 'S' }},
                    { type: 'moment', x: 600, y: 400, caption: 'Best drop ever!', user: { name: 'Alex', avatar: 'A' }},
                    { type: 'dream', x: 300, y: 500, caption: 'Wish I could DJ here', user: { name: 'Chris', avatar: 'C' }},
                    { type: 'promo', x: 500, y: 150, caption: 'VIP Tables Available!', user: { name: 'Host', avatar: 'H' }}
                ];
                
                samplePins.forEach((pinData, index) => {
                    const pin = {
                        id: Date.now() + index,
                        ...pinData,
                        user: pinData.user,
                        createdAt: new Date(),
                        likes: Math.floor(Math.random() * 20),
                        reactions: []
                    };
                    
                    this.pins.push(pin);
                    this.renderPin(pin);
                    
                    // Add some animations
                    setTimeout(() => {
                        const pinElement = document.querySelector(`[data-pin-id="${pin.id}"]`);
                        if (pinElement) {
                            if (pin.type === 'moment') {
                                pinElement.classList.add('active');
                            } else if (pin.type === 'memory') {
                                pinElement.classList.add('throwback');
                            }
                        }
                    }, index * 200);
                });
            }
            
            updatePinCounter() {
                const remaining = this.maxPins - this.userPins;
                document.getElementById('pinCounter').textContent = `${remaining} Pins Left`;
            }
            
            showNotification(message, type = 'info') {
                const notification = document.getElementById('notification');
                const text = document.getElementById('notificationText');
                
                text.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
        }
        
        // Initialize the platform
        document.addEventListener('DOMContentLoaded', () => {
            new NightlifePinPlatform();
        });
        
        // Cross-browser compatibility
        if (!window.requestAnimationFrame) {
            window.requestAnimationFrame = function(callback) {
                return setTimeout(callback, 16);
            };
        }
        
        // Touch event handling for mobile
        let touchStartY = 0;
        document.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });
        
        document.addEventListener('touchmove', (e) => {
            const touchY = e.touches[0].clientY;
            const diff = touchStartY - touchY;
            
            if (Math.abs(diff) > 10) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>


