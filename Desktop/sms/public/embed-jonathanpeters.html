<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SMS Login Embed — jonathanpeters.com</title>
  <!--
    How to use:
    1) Copy the <section> and the two <script> tags into the page on https://jonathanpeters.com
  2) Ensure the SMS server (sf-sms-service.netlify.app) has ALLOWED_ORIGINS set to include:
       https://jonathanpeters.com https://www.jonathanpeters.com
    3) Don’t test this file via file:// — CORS will block it. Test on your actual domain.
  -->
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; padding: 24px; }
    #sms-login { max-width:520px; margin:24px auto; padding:16px; border:1px solid #ddd; border-radius:8px; }
    #sms-login h3 { margin:0 0 12px; }
    #sms-login input { padding:10px; border:1px solid #ccc; border-radius:6px; }
    #sms-login button { padding:10px 14px; border:0; background:#111; color:#fff; border-radius:6px; cursor:pointer; }
    #sms-login .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; margin-bottom:10px; }
    #sms-login pre { margin-top:12px; background:#111; color:#0f0; padding:10px; border-radius:6px; min-height:44px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <!-- SMS Login UI (minimal, inline-styled) -->
  <section id="sms-login">
    <h3>Verify your phone</h3>

    <div class="row">
      <input data-sf-phone type="tel" placeholder="+15551234567" style="flex:1;min-width:220px;" />
      <button data-sf-send>Send Code</button>
    </div>

    <div class="row">
      <input data-sf-code type="text" placeholder="123456" maxlength="6" style="flex:1;min-width:140px;" />
      <button data-sf-verify>Verify</button>
    </div>

    <pre data-sf-out>Ready…</pre>
  </section>

  <!-- Load the SMS login script from your Netlify SMS site -->
  <script src="https://sf-sms-service.netlify.app/public/sf-sms-login.js" defer></script>

  <!-- Optional: react to successful login -->
  <script>
    // Fired when the code verifies. Provides { token, phone }.
    window.addEventListener('sf:auth', (e) => {
      const { token, phone } = e.detail;
      console.log('✅ SMS login success:', phone);
      // Example: POST token to your backend to create a session
      // fetch('/api/session', {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify({ token })
      // });
    });
  </script>
</body>
</html>
