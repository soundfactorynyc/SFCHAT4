<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sound Factory</title>
  <link rel="stylesheet" href="./assets/css/main.css" />
  <link rel="stylesheet" href="./assets/css/blueprints.css" />
  <link rel="stylesheet" href="./assets/css/chat.css" />
</head>
<body>
  <header class="sf-header">
    <h1>Sound Factory</h1>
  </header>

  <main id="app">
    <!-- Components will be injected here -->
  </main>

  <!-- Config and base scripts -->
  <script src="./assets/js/config.js"></script>
  <!-- Include SMS widget from service -->
  <script>window.SMS_API_BASE = window.SF_CONFIG?.SMS_API_BASE || 'https://sf-sms-service.netlify.app';</script>
  <script src="https://sf-sms-service.netlify.app/public/sf-sms-login.js" defer></script>
  <script src="https://sf-sms-service.netlify.app/public/sms-bind-existing-modal.js" defer></script>
  
  <!-- App scripts -->
  <script src="./assets/js/blueprints.js" defer></script>
  <script src="./assets/js/chat.js" defer></script>
  <script src="./assets/js/pins.js" defer></script>
  <script src="./assets/js/sms.js" defer></script>
  <script>
    (async function loadComponents(){
      const container = document.getElementById('app');
      const parts = ['blueprints','chat','tables'];
      for (const part of parts) {
        try {
          const res = await fetch(`./components/${part}.html`, { cache: 'no-cache' });
          if (!res.ok) continue;
          const html = await res.text();
          const sec = document.createElement('section');
          sec.dataset.component = part;
          sec.innerHTML = html;
          container.appendChild(sec);
        } catch (e) { console.warn('Component load failed:', part, e); }
      }
    })();
  </script>
</body>
</html>
