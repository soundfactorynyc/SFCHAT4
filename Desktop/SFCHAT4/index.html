<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Interactive Floor Viewer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            height: 100vh;
            height: 100dvh; /* Dynamic viewport height for mobile */
            overflow: hidden;
            position: relative;
            touch-action: none; /* Prevent scrolling/zooming */
        }

        /* Mobile-first navigation panel - MUCH smaller */
        .nav-panel {
            width: 40px;
            background: rgba(26, 26, 26, 0.9);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 8px 3px;
            display: flex;
            flex-direction: column;
            gap: 5px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            position: fixed;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
        }

        .floor-buttons {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        /* Smaller mobile buttons but still tappable */
        .floor-btn {
            background: rgba(42, 42, 42, 0.9);
            border: 1.5px solid #3a3a3a;
            color: #888;
            min-height: 35px;
            padding: 8px 2px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }

        /* Touch feedback */
        .floor-btn:active {
            transform: scale(0.92);
            transition: transform 0.1s ease;
        }

        .floor-btn.active {
            background: linear-gradient(135deg, #ff0066, #ff3399);
            border-color: #ff0066;
            color: #fff;
            box-shadow: 0 2px 12px rgba(255, 0, 102, 0.5);
            animation: pulse 2s infinite;
        }

        .floor-btn.active:active {
            transform: scale(0.92);
        }

        @keyframes pulse {
            0% { box-shadow: 0 2px 12px rgba(255, 0, 102, 0.5); }
            50% { box-shadow: 0 2px 16px rgba(255, 0, 102, 0.7); }
            100% { box-shadow: 0 2px 12px rgba(255, 0, 102, 0.5); }
        }

        /* Tiny floor indicator */
        .floor-indicator {
            position: absolute;
            left: 2px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 15px;
            background: #ff0066;
            border-radius: 2px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .floor-btn.active .floor-indicator {
            opacity: 1;
            animation: glow 1.5s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Main content - truly full screen on mobile */
        .main-content {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floor-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floor {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px; /* Minimal padding on mobile */
        }

        .floor.active {
            opacity: 1;
            visibility: visible;
        }

        /* Full screen SVG on mobile */
        svg {
            width: 100%;
            height: 100%;
            max-width: calc(100vw - 60px); /* Just account for tiny nav */
            max-height: 100vh;
            filter: drop-shadow(0 0 15px rgba(0,0,0,0.6));
        }

        /* Tablet styles (768px and up) */
        @media (min-width: 768px) {
            .nav-panel {
                width: 50px;
                right: 15px;
                padding: 10px 4px;
                gap: 6px;
                border-radius: 15px;
            }

            .floor-buttons {
                gap: 6px;
            }

            .floor-btn {
                min-height: 38px;
                padding: 10px 3px;
                font-size: 12px;
                border-radius: 10px;
            }

            .floor-btn:hover {
                background: #353535;
                border-color: #555;
                color: #aaa;
                transform: scale(1.05);
            }

            .floor-btn:active {
                transform: scale(1);
            }

            .floor-indicator {
                width: 4px;
                height: 18px;
                left: 3px;
            }

            svg {
                max-width: 90vw;
                max-height: 90vh;
                padding: 10px;
            }
        }

        /* Desktop styles (1024px and up) */
        @media (min-width: 1024px) {
            .nav-panel {
                width: 50px;
                right: 25px;
                padding: 8px 4px;
                gap: 4px;
                border-radius: 12px;
            }

            .floor-buttons {
                gap: 4px;
            }

            .floor-btn {
                min-height: 36px;
                padding: 8px 2px;
                font-size: 11px;
                border-radius: 8px;
                border-width: 2px;
            }

            .floor-indicator {
                width: 4px;
                height: 16px;
                left: 3px;
            }

            svg {
                max-width: 90vw;
                max-height: 90vh;
            }
        }

        /* Landscape mobile optimization - even smaller */
        @media (max-height: 500px) and (orientation: landscape) {
            .nav-panel {
                width: 36px;
                top: 50%;
                right: 6px;
                padding: 5px 2px;
                gap: 3px;
            }

            .floor-btn {
                min-height: 30px;
                padding: 6px 1px;
                font-size: 10px;
            }

            svg {
                max-width: calc(100vw - 50px);
            }
        }

        /* Prevent text selection on mobile */
        * {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* iOS specific fixes */
        @supports (-webkit-touch-callout: none) {
            .nav-panel {
                -webkit-backdrop-filter: blur(10px);
            }
        }
    </style>
</head>
<body>
    <!-- Main Content Area -->
    <div class="main-content">
        <div class="floor-container">
            <!-- Basement -->
            <div class="floor" id="floor-b">
                <svg viewBox="0 0 400 520" preserveAspectRatio="xMidYMid meet">
                    <defs>
                        <filter id="basementGlow">
                            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    
                    <rect width="400" height="520" fill="#000"/>
                    <rect x="5" y="5" width="390" height="510" fill="none" stroke="#333" stroke-width="2" filter="url(#basementGlow)"/>
                    <rect x="10" y="10" width="380" height="500" fill="#050505" stroke="#222" stroke-width="1"/>
                    <rect x="30" y="30" width="340" height="460" fill="none" stroke="#444" stroke-width="2"/>
                    
                    <rect x="180" y="35" width="140" height="45" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="185" y="40" width="130" height="35" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="35" y="35" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="40" y="40" width="50" height="70" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="35" y="120" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="35" y="320" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="35" y="385" width="60" height="100" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="40" y="390" width="50" height="90" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="110" y="100" width="180" height="320" fill="none" stroke="#333" stroke-width="1" stroke-dasharray="5,5" opacity="0.5"/>
                    
                    <rect x="140" y="140" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    <rect x="240" y="140" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    <rect x="140" y="240" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    <rect x="240" y="240" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    <rect x="140" y="340" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    <rect x="240" y="340" width="20" height="20" fill="#000" stroke="#444" stroke-width="2"/>
                    
                    <rect x="305" y="120" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="310" y="125" width="50" height="50" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="305" y="185" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="305" y="250" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="310" y="255" width="50" height="50" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="305" y="315" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="305" y="380" width="60" height="60" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="310" y="385" width="50" height="50" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <rect x="120" y="440" width="160" height="45" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="125" y="445" width="150" height="35" fill="none" stroke="#333" stroke-width="1"/>
                    
                    <path d="M180,485 L180,475 L220,475 L220,485" stroke="#666" stroke-width="2" fill="none" stroke-dasharray="2,2"/>
                </svg>
            </div>

            <!-- Main Floor -->
            <div class="floor active" id="floor-mf">
                <svg viewBox="0 0 400 520" preserveAspectRatio="xMidYMid meet">
                    <defs>
                        <linearGradient id="perimeterGrad1" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#333;stop-opacity:1" />
                            <stop offset="50%" style="stop-color:#666;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#333;stop-opacity:1" />
                        </linearGradient>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    
                    <rect width="400" height="520" fill="#000"/>
                    <rect x="5" y="5" width="390" height="510" fill="none" stroke="url(#perimeterGrad1)" stroke-width="3" filter="url(#glow)"/>
                    <rect x="10" y="10" width="380" height="500" fill="#050505" stroke="#444" stroke-width="2"/>
                    
                    <rect x="100" y="20" width="95" height="65" fill="#0a0a0a" stroke="#555" stroke-width="2"/>
                    <rect x="205" y="20" width="95" height="65" fill="#0a0a0a" stroke="#555" stroke-width="2"/>
                    
                    <rect x="45" y="30" width="40" height="45" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="315" y="30" width="40" height="45" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <rect x="20" y="110" width="45" height="350" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <g opacity="0.9" filter="url(#glow)">
                        <rect x="90" y="140" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="182" y="140" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="275" y="140" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        
                        <rect x="90" y="210" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="182" y="210" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="275" y="210" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        
                        <rect x="90" y="280" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="182" y="280" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="275" y="280" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        
                        <rect x="90" y="350" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="182" y="350" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                        <rect x="275" y="350" width="35" height="35" fill="#000" stroke="#444" stroke-width="2" rx="2"/>
                    </g>
                    
                    <rect x="100" y="420" width="200" height="50" fill="#000" stroke="#666" stroke-width="2"/>
                    
                    <g stroke="#666" stroke-width="2" fill="none">
                        <path d="M100,505 L100,485 L120,485 L120,505" stroke-dasharray="2,2"/>
                        <path d="M190,505 L190,485 L210,485 L210,505" stroke-dasharray="2,2"/>
                        <path d="M280,505 L280,485 L300,485 L300,505" stroke-dasharray="2,2"/>
                    </g>
                </svg>
            </div>

            <!-- Mezzanine -->
            <div class="floor" id="floor-mz">
                <svg viewBox="0 0 400 520" preserveAspectRatio="xMidYMid meet">
                    <rect width="400" height="520" fill="#000"/>
                    
                    <rect x="5" y="5" width="390" height="510" fill="none" stroke="#555" stroke-width="3"/>
                    <rect x="10" y="10" width="380" height="500" fill="#050505" stroke="#555" stroke-width="2"/>
                    
                    <rect x="35" y="35" width="330" height="450" fill="#0a0a0a" stroke="#666" stroke-width="3"/>
                    
                    <rect x="100" y="100" width="200" height="250" fill="#000" stroke="#444" stroke-width="2"/>
                    <text x="200" y="225" font-family="Arial" font-size="11" fill="#666" text-anchor="middle" opacity="0.8">
                        OPEN TO BELOW
                    </text>
                    
                    <rect x="175" y="45" width="50" height="50" fill="#0f0f0f" stroke="#777" stroke-width="2"/>
                    <rect x="175" y="425" width="50" height="50" fill="#0f0f0f" stroke="#777" stroke-width="2"/>
                    <rect x="250" y="170" width="50" height="70" fill="#0f0f0f" stroke="#666" stroke-width="2"/>
                    <rect x="320" y="45" width="35" height="35" fill="#1a0000" stroke="#aa3333" stroke-width="2" opacity="0.8"/>
                    
                    <rect x="45" y="130" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="45" y="170" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="45" y="210" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="45" y="250" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="45" y="290" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    
                    <rect x="310" y="130" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="310" y="170" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="310" y="210" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="310" y="250" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    <rect x="310" y="290" width="45" height="30" fill="none" stroke="#555" stroke-width="2" rx="2"/>
                    
                    <circle cx="75" cy="95" r="6" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="325" cy="95" r="6" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="75" cy="355" r="6" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="325" cy="355" r="6" fill="#000" stroke="#666" stroke-width="2"/>
                </svg>
            </div>

            <!-- Second Floor -->
            <div class="floor" id="floor-2">
                <svg viewBox="0 0 400 520" preserveAspectRatio="xMidYMid meet">
                    <rect width="400" height="520" fill="#000"/>
                    
                    <rect x="5" y="5" width="390" height="510" fill="none" stroke="#888" stroke-width="4"/>
                    <rect x="10" y="10" width="380" height="500" fill="#000" stroke="#666" stroke-width="3"/>
                    
                    <rect x="30" y="30" width="140" height="100" fill="#000" stroke="#666" stroke-width="2"/>
                    <rect x="30" y="30" width="140" height="35" fill="#0a0a0a" stroke="#555" stroke-width="1"/>
                    <rect x="30" y="65" width="70" height="65" fill="none" stroke="#444" stroke-width="1"/>
                    <rect x="100" y="65" width="70" height="65" fill="none" stroke="#444" stroke-width="1"/>
                    
                    <rect x="170" y="50" width="60" height="80" fill="#0a0a0a" stroke="#777" stroke-width="2"/>
                    <rect x="230" y="50" width="60" height="80" fill="#0a0a0a" stroke="#777" stroke-width="2"/>
                    
                    <rect x="290" y="30" width="80" height="100" fill="#000" stroke="#666" stroke-width="2"/>
                    <line x1="290" y1="60" x2="370" y2="60" stroke="#444" stroke-width="1"/>
                    <line x1="290" y1="90" x2="370" y2="90" stroke="#444" stroke-width="1"/>
                    <line x1="330" y1="30" x2="330" y2="130" stroke="#444" stroke-width="1"/>
                    
                    <rect x="30" y="150" width="60" height="300" fill="#000" stroke="#666" stroke-width="2"/>
                    
                    <rect x="120" y="180" width="160" height="160" fill="none" stroke="#555" stroke-width="2" stroke-dasharray="4,4"/>
                    <text x="200" y="260" font-family="Arial" font-size="11" fill="#666" text-anchor="middle" opacity="0.8">
                        OPEN SPACE
                    </text>
                    
                    <circle cx="105" cy="165" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="105" cy="220" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="105" cy="275" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="105" cy="330" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    
                    <circle cx="295" cy="165" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="295" cy="220" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="295" cy="275" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    <circle cx="295" cy="330" r="8" fill="#000" stroke="#666" stroke-width="2"/>
                    
                    <rect x="310" y="180" width="60" height="160" fill="#000" stroke="#666" stroke-width="2"/>
                    <rect x="320" y="190" width="40" height="30" fill="none" stroke="#444" stroke-width="1" rx="2"/>
                    <rect x="320" y="230" width="40" height="30" fill="none" stroke="#444" stroke-width="1" rx="2"/>
                    <rect x="320" y="270" width="40" height="30" fill="none" stroke="#444" stroke-width="1" rx="2"/>
                    <rect x="320" y="310" width="40" height="30" fill="none" stroke="#444" stroke-width="1" rx="2"/>
                    
                    <rect x="120" y="390" width="160" height="80" fill="#0a0a0a" stroke="#777" stroke-width="2"/>
                    
                    <rect x="310" y="410" width="60" height="60" fill="#000" stroke="#666" stroke-width="2"/>
                    <line x1="325" y1="425" x2="355" y2="455" stroke="#555" stroke-width="2"/>
                    <line x1="355" y1="425" x2="325" y2="455" stroke="#555" stroke-width="2"/>
                    
                    <rect x="310" y="480" width="20" height="10" fill="none" stroke="#777" stroke-width="2" stroke-dasharray="2,2"/>
                    <rect x="350" y="480" width="20" height="10" fill="none" stroke="#777" stroke-width="2" stroke-dasharray="2,2"/>
                </svg>
            </div>

            <!-- Third Floor -->
            <div class="floor" id="floor-3">
                <svg viewBox="0 0 400 520" preserveAspectRatio="xMidYMid meet">
                    <rect width="400" height="520" fill="#000"/>
                    
                    <rect x="5" y="5" width="390" height="510" fill="none" stroke="#555" stroke-width="3"/>
                    <rect x="10" y="10" width="380" height="500" fill="#050505" stroke="#444" stroke-width="2"/>
                    
                    <rect x="30" y="30" width="340" height="460" fill="none" stroke="#666" stroke-width="2"/>
                    
                    <rect x="100" y="140" width="200" height="180" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <rect x="150" y="35" width="100" height="80" fill="#000" stroke="#666" stroke-width="2"/>
                    <path d="M170,70 Q200,60 230,70" fill="none" stroke="#555" stroke-width="2"/>
                    <path d="M170,90 Q200,80 230,90" fill="none" stroke="#555" stroke-width="2"/>
                    
                    <rect x="35" y="35" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="35" y="180" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="35" y="350" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <rect x="305" y="35" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="305" y="180" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    <rect x="305" y="350" width="60" height="80" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <rect x="120" y="390" width="160" height="80" fill="#000" stroke="#666" stroke-width="2"/>
                    
                    <rect x="35" y="440" width="40" height="40" fill="#000" stroke="#555" stroke-width="2"/>
                    <line x1="45" y1="450" x2="65" y2="470" stroke="#444" stroke-width="2"/>
                    <line x1="65" y1="450" x2="45" y2="470" stroke="#444" stroke-width="2"/>
                    
                    <rect x="325" y="440" width="40" height="40" fill="#000" stroke="#555" stroke-width="2"/>
                    
                    <path d="M180,485 L180,475 L220,475 L220,485" stroke="#666" stroke-width="2" fill="none" stroke-dasharray="2,2"/>
                </svg>
            </div>
        </div>
    </div>

    <!-- Navigation Panel - Fixed position on right -->
    <div class="nav-panel">
        <div class="floor-buttons">
            <button class="floor-btn" data-floor="3" aria-label="Third Floor">
                <span class="floor-indicator"></span>
                3F
            </button>
            <button class="floor-btn" data-floor="2" aria-label="Second Floor">
                <span class="floor-indicator"></span>
                2F
            </button>
            <button class="floor-btn" data-floor="mz" aria-label="Mezzanine">
                <span class="floor-indicator"></span>
                MZ
            </button>
            <button class="floor-btn active" data-floor="mf" aria-label="Main Floor">
                <span class="floor-indicator"></span>
                MF
            </button>
            <button class="floor-btn" data-floor="b" aria-label="Basement">
                <span class="floor-indicator"></span>
                B
            </button>
        </div>
    </div>

    <script>
        // Get all floor buttons and floor elements
        const floorButtons = document.querySelectorAll('.floor-btn');
        const floors = document.querySelectorAll('.floor');

        // Floor mapping
        const floorMap = {
            'b': 'floor-b',
            'mf': 'floor-mf',
            'mz': 'floor-mz',
            '2': 'floor-2',
            '3': 'floor-3'
        };

        // Add click event to each button
        floorButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                floorButtons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Get the floor to show
                const floorToShow = this.getAttribute('data-floor');
                const floorId = floorMap[floorToShow];
                
                // Hide all floors
                floors.forEach(floor => floor.classList.remove('active'));
                
                // Show selected floor
                const selectedFloor = document.getElementById(floorId);
                if (selectedFloor) {
                    selectedFloor.classList.add('active');
                }
            });
        });

        // Touch event handling for better mobile experience
        let touchStartY = 0;
        let touchEndY = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartY = e.changedTouches[0].screenY;
        }, false);

        document.addEventListener('touchend', function(e) {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, false);

        function handleSwipe() {
            const activeButton = document.querySelector('.floor-btn.active');
            let nextButton = null;
            
            if (touchEndY < touchStartY - 50) {
                // Swiped up
                nextButton = activeButton.previousElementSibling;
            }
            
            if (touchEndY > touchStartY + 50) {
                // Swiped down
                nextButton = activeButton.nextElementSibling;
            }
            
            if (nextButton && nextButton.classList.contains('floor-btn')) {
                nextButton.click();
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const activeButton = document.querySelector('.floor-btn.active');
            let nextButton = null;
            
            if (e.key === 'ArrowUp') {
                nextButton = activeButton.previousElementSibling;
            } else if (e.key === 'ArrowDown') {
                nextButton = activeButton.nextElementSibling;
            }
            
            if (nextButton && nextButton.classList.contains('floor-btn')) {
                nextButton.click();
            }
        });

        // Prevent pinch zoom on iOS
        document.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        });
    </script>

    <!-- Chat Overlay Mount -->
    <div id="sf-chat-root" style="position:fixed;left:0;right:0;bottom:0;z-index:200;"></div>

    <script type="module">
      class SFChatOverlay extends HTMLElement {
        connectedCallback() {
          this.innerHTML = `
            <style>
              .chat-bar {
                height: 60px;
                background: rgba(0,0,0,0.85);
                border-top: 2px solid #ff0066;
                color: #fff;
                font-family: system-ui, sans-serif;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 12px;
                cursor: pointer;
              }
              .chat-expanded {
                position: absolute;
                bottom: 60px;
                left: 0;
                right: 0;
                height: 300px;
                background: rgba(10,10,10,0.95);
                border-top: 1px solid #333;
                overflow-y: auto;
              }
              .chat-msg {
                padding: 6px 10px;
                border-bottom: 1px solid #222;
                font-size: 13px;
              }
            </style>
            <div class="chat-bar">💬 Tap to open chat</div>
            <div class="chat-expanded" hidden></div>
          `;
          this.querySelector(".chat-bar").addEventListener("click", () => {
            const panel = this.querySelector(".chat-expanded");
            panel.hidden = !panel.hidden;
          });
        }
      }
      customElements.define("sf-chat-overlay", SFChatOverlay);

      // Mount it
      document.getElementById("sf-chat-root").appendChild(document.createElement("sf-chat-overlay"));
    </script>
</body>
</html>