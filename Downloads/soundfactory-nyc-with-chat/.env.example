# --- Public (exposed to client via Netlify build or bundle) ---
# Supabase anon key (safe for client). DO NOT expose service role.
SUPABASE_URL="https://YOUR-project-id.supabase.co"
SUPABASE_ANON_KEY="public-anon-key"

# Feature flag: if set to 'true' will use Supabase native phone OTP instead of custom Twilio flow
USE_SUPABASE_PHONE_OTP="false"

# Allow exposing demo codes in responses (ONLY for local dev). Set to 'false' in prod.
ALLOW_DEMO_CODES="true"

# --- Server-only (set in Netlify environment / NEVER commit real values) ---
SUPABASE_SERVICE_ROLE_KEY="service-role-key" # server-side only
SMS_PEPPER="change-this-random-long-string" # used in hashing verification codes

# Twilio credentials (required if using Twilio path)
TWILIO_ACCOUNT_SID="ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
TWILIO_AUTH_TOKEN="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
TWILIO_FROM="+15555550123" # E.164 number (fallback priority 1)
TWILIO_PHONE_NUMBER="+15555550123" # Backwards compatibility (used if TWILIO_FROM unset)
TWILIO_MESSAGING_SERVICE_SID="MGxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" # Preferred (overrides FROM when set)
SMS_DEBUG="false" # Set true to include Twilio error codes in responses (DO NOT enable in prod)

# Stripe integration
STRIPE_SECRET_KEY="sk_live_or_test_xxx" # server secret
STRIPE_WEBHOOK_SECRET="whsec_xxx" # webhook signing secret

# Optional commission retry schedule enable flag
ENABLE_COMMISSION_RETRY="true"

# Rate limiting (optional tunables)
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX_REQUESTS="100"

# Environment indicator
NODE_ENV="development"

# --- Notes ---
# 1. Copy this file to .env (not committed) and fill real values.
# 2. For production, remove ALLOW_DEMO_CODES or set it to false.
# 3. Keep SUPABASE_SERVICE_ROLE_KEY ONLY in server env vars, never bundle to client.
# 4. Rotate SMS_PEPPER periodically; rotate invalidates outstanding codes.
# 5. Ensure STRIPE_WEBHOOK_SECRET matches the endpoint configured in Stripe dashboard.
